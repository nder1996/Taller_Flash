<%- include("../template/header", {title:'Mecanico'}) %>
<link rel="stylesheet" href="css/Mecanico.css">
</head>

<body>
    <div class="Pagina_Principal">
        <%- include("../template/navbar") %>
        <div class="Principal container-fluid">
            <br>
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pills-1-tab" data-bs-toggle="pill" data-bs-target="#pills-1" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Ver Reparaciones Asignadas<i class="fas fa-wrench"></i></button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-2" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Ver Reparaciones Disponibles&nbsp;&nbsp;<i class="fas fa-tools"></i></button>
                </li>
            </ul>
            <br> <br>
            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-1" role="tabpanel" aria-labelledby="pills-1-tab">
                    <table id="tablamecanico" class="table table-striped table-bordered">
                        <thead style="background-color: #8892c6; color:white;">
                            <tr>
                                <th scope="col"># DE REPARACIÓN</th>
                                <th scope="col">NOMBRE Y PLACA DEL VEHÍCULO</th>
                                <th scope="col">TIPO DE REPARACIÓN</th>
                                <th scope="col">ESTADO DEL VEHÍCULO</th>
                                <th scope="col">ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% reparaciones.forEach(reparacion => { %>
                            <tr>
                                <td>
                                    <%= reparacion.id_reparacion %>
                                </td>
                                <td>
                                    <%= vehiculos[reparacion.id_vehiculo] %>
                                </td>
                                <td>
                                    <%= reparacion.descripcion_reparacion %>
                                </td>
                                <td>
                                    <%= reparacion.estado_reparacion %>
                                </td>
                                <td><a onclick="editarestado('<%= reparacion.id_reparacion %>','<%= reparacion.estado_reparacion %>')" class="btn btn btn-primary" id="editar_usuario">Editar estado del vehiculo</a>
                            </tr>
                            <% }) %>
                        </tbody>
                    </table>
                    <!---->
                </div>
                <div class="tab-pane fade mb-5" id="pills-2" role="tabpanel" aria-labelledby="pills-profile-tab">
                    <table id="tabladisponibles" class="table  table-striped table-bordered">
                        <thead style="background-color: #8892c6; color:white;">
                            <tr>
                                <th scope="col"># DE REPARACIÓN</th>
                                <th scope="col">NOMBRE Y PLACA DEL VEHÍCULO</th>
                                <th scope="col">TIPO DE REPARACIÓN</th>
                                <th scope="col">ESTADO DEL VEHÍCULO</th>
                                <th scope="col">ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% reparaciones_disponibles.forEach(reparacion => { %>
                            <tr>
                                <td>
                                    <%= reparacion.id_reparacion %>
                                </td>
                                <td>
                                    <%= vehiculos[reparacion.id_vehiculo] %>
                                </td>
                                <td>
                                    <%= reparacion.descripcion_reparacion %>
                                </td>
                                <td>
                                    <%= reparacion.estado_reparacion %>
                                </td>
                                <td><a onclick="agregarmecanico('<%= reparacion.id_reparacion %>','<%= id_mecanico %>')" class="btn  btn-success">Listar Reparacion</a>
                            </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modal-reparacion" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal-reparacionLabel">Editar reparacion</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="formReparacion" required>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="id_reparacion" class="col-form-label">id de reparacion:</label>
                            <input type="text" class="form-control" id="id_reparacion" name="id_reparacion" readonly>
                        </div>
                        <div class="form-group">
                            <label for="estado" class="col-form-label">estado del vehiculo:</label>
                            <input type="text" class="form-control" id="estado" name="estado" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary close">Cerrar</button>
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <%- include("../template/footer") %>
    <script src="js/mecanico.js"></script>